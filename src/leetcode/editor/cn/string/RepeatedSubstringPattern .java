package leetcode.editor.cn.string;

//ç»™å®šä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦å¯ä»¥ç”±å®ƒçš„ä¸€ä¸ªå­ä¸²é‡å¤å¤šæ¬¡æ„æˆã€‚ç»™å®šçš„å­—ç¬¦ä¸²åªå«æœ‰å°å†™è‹±æ–‡å­—æ¯ï¼Œå¹¶ä¸”é•¿åº¦ä¸è¶…è¿‡10000ã€‚ 
//
// ç¤ºä¾‹ 1: 
//
// 
//è¾“å…¥: "abab"
//
//è¾“å‡º: True
//
//è§£é‡Š: å¯ç”±å­å­—ç¬¦ä¸² "ab" é‡å¤ä¸¤æ¬¡æ„æˆã€‚
// 
//
// ç¤ºä¾‹ 2: 
//
// 
//è¾“å…¥: "aba"
//
//è¾“å‡º: False
// 
//
// ç¤ºä¾‹ 3: 
//
// 
//è¾“å…¥: "abcabcabcabc"
//
//è¾“å‡º: True
//
//è§£é‡Š: å¯ç”±å­å­—ç¬¦ä¸² "abc" é‡å¤å››æ¬¡æ„æˆã€‚ (æˆ–è€…å­å­—ç¬¦ä¸² "abcabc" é‡å¤ä¸¤æ¬¡æ„æˆã€‚)
// 
// Related Topics å­—ç¬¦ä¸² å­—ç¬¦ä¸²åŒ¹é… ğŸ‘ 592 ğŸ‘ 0

class RepeatedSubstringPattern{
    public static void main(String[] args) {
        Solution solution = new RepeatedSubstringPattern().new Solution();
        String s = "babbabbabbabbab";
        System.out.println(solution.repeatedSubstringPattern(s));;
    }

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    public boolean repeatedSubstringPattern(String s) {
        // æ€ä¹ˆæ‰¾åˆ°é‚£ä¸ªç»„æˆçš„å­—ç¬¦ä¸²ï¼Ÿæœ€é•¿ç›¸åŒå‰åç¼€ï¼Ÿ
        // åœ¨strsträ¸­ï¼Œæˆ‘ä»¬é€šè¿‡åˆ¤æ–­ æ¨¡å¼ä¸²æ˜¯å¦æŒ‡å‘æœ€åä¸€ä½æ¥åˆ¤æ–­, æ¨¡å¼ä¸²æ˜¯å¦ä¸ºæ–‡æœ¬ä¸²çš„å­ä¸²ï¼Œ
        // ç„¶åè¿”å›å­ä¸²é•¿åº¦ = i - next.length - 1 = i - (next[next.length-1]+1)

        // åœ¨è¿™ä¸ªé¢˜ä¸­ï¼Œæ•°ç»„é•¿åº¦å‡å»æœ€é•¿ç›¸åŒå‰åç¼€çš„é•¿åº¦ç›¸å½“äºæ˜¯ç¬¬ä¸€ä¸ªå‘¨æœŸçš„é•¿åº¦ï¼Œå¦‚æœè¿™ä¸ªå‘¨æœŸå¯ä»¥è¢«æ•´é™¤ï¼Œå°±è¯´æ˜æ•´ä¸ªæ•°ç»„å°±æ˜¯è¿™ä¸ªå‘¨æœŸçš„å¾ªç¯ã€‚
        // æœ€é•¿ç›¸åŒå‰åç¼€é•¿åº¦ä¸º next[len-1] +1 ; ä¸ºä»€ä¹ˆåŠ ä¸€ï¼Ÿå› ä¸ºæˆ‘ä»¬å­˜çš„nextæ•°ç»„æ˜¯ç»è¿‡å³ç§» -1çš„
        // åˆ™å¦‚æœè¯¥å­—ç¬¦æ˜¯ç”±é‡å¤å­ä¸²ç»„æˆï¼Œå­˜åœ¨ len % (len - next[next.length-1] + 1) = 0

        int len = s.length();
        int[] next=new int[len];
        // è·å–å­˜å‚¨æœ€é•¿ç›¸åŒå‰åç¼€é•¿åº¦çš„nextæ•°ç»„ï¼Œè®°å¾—+1ï¼› å¦‚æœnextçš„æœ€åä¸€å€¼ä¸º-1ï¼Œåˆ™è¯´æ˜æ²¡æœ‰æœ€é•¿ç›¸åŒå‰åç¼€
        getNext(next,s);

        // è¿™ä¸ªæ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„å•Šï¼Œç‰›çš„
        // æœ¬é¢˜éš¾ç‚¹ï¼Œæ€ä¹ˆæ‰¾åˆ°é‡å¤å­ä¸²çš„é•¿åº¦ï¼
        // æ•°ç»„é•¿åº¦å‡å»æœ€é•¿ç›¸åŒå‰åç¼€çš„é•¿åº¦ç›¸å½“äºæ˜¯ç¬¬ä¸€ä¸ªé‡å¤å­ä¸²çš„é•¿åº¦ï¼Œ
        // å¦‚æœè¿™ä¸ªå‘¨æœŸå¯ä»¥è¢«æ•´é™¤ï¼Œå°±è¯´æ˜æ•´ä¸ªæ•°ç»„å°±æ˜¯è¿™ä¸ªå‘¨æœŸçš„å¾ªç¯ã€‚
        if (next[len - 1] != -1 && len % (len-(next[len-1]+1))==0){
            return true;
        }else {
            return false;
        }
    }
    public void getNext(int[] next,String s){
        // è®°å½•ä½ç½®åç§»ä¸€ä½ï¼Œå³è¡¨ç¤ºåœ¨å½“å‰ä½ç½®ä¸‹ï¼Œå‰ä¸€ä½çš„æœ€å¤§ç›¸åŒå‰åç¼€é•¿åº¦
        int j=-1;
        next[0]=j;
        for (int i = 1; i < s.length(); i++) {
            // å­—ç¬¦ä¸ç›¸åŒ
            while (j>=0 && s.charAt(i)!=s.charAt(j+1)){
                j=next[j];  // jå›é€€
            }
            // å­—ç¬¦ç›¸åŒï¼Œåˆ™ä¸¤æŒ‡é’ˆç§»ä½
            if (s.charAt(i)==s.charAt(j+1)){
                j++;
            }
            // è®°å½•æœ€å¤§ç›¸åŒå‰åç¼€é•¿åº¦
            next[i]=j;
        }
    }
}
//leetcode submit region end(Prohibit modification and deletion)

}